<mat-drawer-container class="mat-drawer-container mat-drawer-transition">
    <mat-drawer-content class="mat-drawer-content">
        <app-header></app-header>

        <sticky sticky-start="80" class="current-flight-search d-block d-sm-none mb-3" style="box-sizing: border-box; position: static; float: none; top: auto; bottom: auto; width: 375px; left: auto; z-index: 3 !important;">
            <div class="current-search-sector row d-flex align-items-center pb-2">
                <div class="col-5 pr-0">
                    <p>{{oLocation | airPorts}}</p>
                </div>
                <div class="col-2 text-center">
                    <i-arrow-right class="feather"></i-arrow-right>
                </div>
                <div class="col-5 pl-0">
                    <p>{{dLocation | airPorts}}</p>
                </div>
            </div>
            <p class="current-search-passenger text-center">{{adtQty}} Adult(s), {{cnnQty}} Child, {{infQty}} Infant</p>
            <div class="current-search-footer d-flex justify-content-between align-items-center dropdown">
                <div class="current-search-dates d-flex align-items-center">
                    <i-calendar class="feather"></i-calendar>
                    <p class="mr-3">{{dptDate | date}}</p>
                    <!---->
                    <div *ngIf="isReturn">
                        <p class="mr-3">{{rtnDate | date}}</p>
                    </div>
                </div>
                <div>
                    <button class="btn btn-primary btn-sm rounded-0 shadow" (click)="mChangeSearch = true">Change
                        Search</button>
                </div>
            </div>

        </sticky>


        <mat-sidenav-container class="example-container">
            <mat-sidenav mode="side" opened="{{msideNav}}">
                <h3 class="sidebar-title">
                    Flight Details
                    <i-x-circle class="dropdown-feather" (click)="msideNav = false"></i-x-circle>
                </h3>
                <mat-spinner *ngIf="mbyTag == null"></mat-spinner>
                <div id="mbyTagError" *ngIf="mbyTag == 'Error'" style="color:red">
                    <p>Flight Not Valid, try again later</p>
                </div>
                <div class="flight-segment-details" style="overflow-x:hidden;" *ngIf="mOriginDestinationOptions != null">
                    <div *ngFor="let Segments of mOriginDestinationOptions">
                        <div class="bg-white" *ngFor="let Segment of Segments.FlightSegment">
                            <div class="flight-segment-details-header py-1 px-2">

                                {{Segment.DepartureAirport.LocationCode | airPorts}}
                                <b>TO</b> {{Segment.ArrivalAirport.LocationCode | airPorts}}
                            </div>
                            <div class="row py-2 d-flex align-items-center flight-details-sec">
                                <div class="col-4">
                                    <p class="mb-0">Flight</p>
                                </div>
                                <div class="col-8 pl-0 d-flex justify-content-between">
                                    <div>
                                        <img class="img-fluid" src="http://rehmantravel.com/application/modules/RT-agent/AirlineLogos/{{Segment.OperatingAirline.Code}}.png" alt="EK Logo"> {{Segment.OperatingAirline.Code}} {{Segment.OperatingAirline.FlightNumber}}
                                    </div>
                                    <div>
                                        <p class="mb-0">Class : {{Segment.ResBookDesigCode}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="row py-2 d-flex align-items-center flight-details-sec">
                                <div class="col-4">
                                    <p class="mb-0">Departure</p>
                                </div>
                                <div class="col-8 pl-0">
                                    <div class="d-flex justify-contents-between">
                                        <div>
                                            <i-map-pin class="feather"></i-map-pin>
                                        </div>
                                        <div>
                                            <p class="mb-0">{{Segment.DepartureAirport.LocationCode | airPorts}}</p>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex justify-contents-between">
                                            <div>
                                                <i-calendar class="feather"></i-calendar>
                                            </div>
                                            <div>
                                                <small>{{Segment.DepartureDateTime.replace('T', ' ') | date}}</small>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-contents-between">
                                            <div>
                                                <i-clock class="feather"></i-clock>
                                            </div>
                                            <div>
                                                <small>{{Segment.DepartureDateTime.replace('T', ' ') | date : 'mediumTime'}}</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-contents-between">
                                        <div>
                                            <i-map-pin class="feather"></i-map-pin>
                                        </div>
                                        <div>
                                            <p class="mb-0">{{Segment.DepartureAirport.LocationCode | airPorts: '1'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row py-2 d-flex align-items-center flight-details-sec">
                                <div class="col-4">
                                    <p class="mb-0">Duration</p>
                                </div>
                                <div class="col-8 pl-0 d-flex justify-content-between align-items-center">
                                    <div>
                                        <small class="text-muted d-flex align-items-center">
                                            <i-clock class="feather"></i-clock>
                                            &nbsp;{{Segment.ElapsedTime | secondsPipe}}
                                        </small>
                                    </div>
                                    <div>
                                        <p class="mb-0 text-primary">{{Segment.StopQuantity}} Stop</p>
                                    </div>
                                </div>
                            </div>
                            <div class="row py-2 d-flex align-items-center flight-details-sec">
                                <div class="col-4">
                                    <p class="mb-0">Arrival</p>
                                </div>
                                <div class="col-8 pl-0">
                                    <div class="d-flex">
                                        <div>
                                            <i-map-pin class="feather"></i-map-pin>
                                        </div>
                                        <div>
                                            <p class="mb-0">{{Segment.ArrivalAirport.LocationCode | airPorts}}</p>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex">
                                            <div>
                                                <i-calendar class="feather"></i-calendar>
                                            </div>
                                            <div>
                                                <small>{{Segment.ArrivalDateTime.replace('T', ' ') | date}}</small>
                                            </div>
                                        </div>
                                        <div class="d-flex">
                                            <div>
                                                <i-clock class="feather"></i-clock>
                                            </div>
                                            <div>
                                                <small>{{Segment.ArrivalDateTime.replace('T', ' ') | date : 'mediumTime'}}</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex">
                                        <div>
                                            <i-map-pin class="feather"></i-map-pin>
                                        </div>
                                        <div>
                                            <p class="mb-0">{{Segment.ArrivalAirport.LocationCode | airPorts: '1'}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-sidenav>
        </mat-sidenav-container>

        <section class="flight-serch pt-0 pt-sm-2 main-search-form" style="position:relative">
            <div class="container">

                <div class="section-title d-none d-sm-block">
                    <h1>Flight Search</h1>
                </div>

                <app-flights-search></app-flights-search>
                <div class="row">
                    <div class="col-sm-3 d-none d-sm-block">
                        <div class="sidebar-list">
                            <h3 class="sidebar-title">Filter Your Search</h3>
                            <ul class="list-style-none p-0 stop-filter" *ngIf="stopFilteritems.length > 0">
                                <li *ngFor="let stopFilteritem of stopFilteritems">
                                    <mat-checkbox (change)="airlineFilters($event, 'stop', 'd')" value="{{stopFilteritem.value}}" class="mat-checkbox">
                                        {{stopFilteritem.text}} </mat-checkbox>

                                </li>
                            </ul>

                            <div *ngIf="responseAirlinesUnique.length > 0">
                                <h3 class="sidebar-title">Filter By AirLine</h3>
                                <ul class="list-style-none p-0 stop-filter" *ngIf="stopFilteritems.length > 0">
                                    <li *ngFor="let eachAirLine of responseAirlinesUnique">
                                        <mat-checkbox (change)="airlineFilters($event, 'airline', 'd')" value="{{eachAirLine.value}}" class="mat-checkbox">
                                            {{eachAirLine.text}} </mat-checkbox>

                                    </li>
                                </ul>
                            </div>

                        </div>
                        <!-- <div class="sidebar-subscribe mt-4">
                            <p class="mb-0">Subscribe to Get Amazing Offers</p>
                            <h3>Flight Alerts</h3>
                            <button class="btn btn-secondary">Subscribe</button>
                        </div> -->
                    </div>
                    <div class="col-sm-9 flight-listing">

                        <div *ngIf="availableFlights == 'Loading'">
                            <p class="center">Loading Results</p>
                            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                        </div>
                        <div class="rowsParent" *ngIf="availableFlights && availableFlights != 'Loading'" infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollThrottle]="50" (scrolled)="onScroll()">
                            <!-- desktop listing -->
                            <div class="card shadow rounded-0 mb-3 p-0 d-none d-sm-block eachRow" *ngFor="let Itinerary of availableFlights; let i=index;">
                                <div class="card-body">
                                    <div>
                                        <div>
                                            <div *ngFor="let Segment of Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption; let l=last" class="flight-segment">
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-sm-1 pr-2 text-left">
                                                        <div class="d-inline-block text-center">
                                                            <img class="img-fluid" src="https://www.rehmantravel.com/application/modules/RT-agent/AirlineLogos/{{Segment.FlightSegment[0].OperatingAirline.Code}}.png" alt="{{Segment.FlightSegment[0].OperatingAirline.Code}} Logo">
                                                            <p>{{Segment.FlightSegment[0].OperatingAirline.Code}} {{Segment.FlightSegment[0].OperatingAirline.FlightNumber}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3 px-2">
                                                        <h5><span *ngFor="let flgtSegment of Segment.FlightSegment">{{flgtSegment.DepartureAirport.LocationCode}}
                                                                -
                                                            </span>{{Segment.FlightSegment[(Segment.FlightSegment.length - 1)].ArrivalAirport.LocationCode}}
                                                        </h5>
                                                        <small class="text-muted d-flex align-items-center">
                                                            <i-clock class="feather"></i-clock>
                                                            &nbsp;{{Segment.ElapsedTime | secondsPipe}}
                                                        </small>
                                                    </div>

                                                    <div class="col-sm-3 px-2 d-flex align-items-start">


                                                        <div class="d-inline-block">
                                                            <p>{{Segment.FlightSegment[0].DepartureAirport.LocationCode | airPorts}}
                                                            </p>
                                                            <small>{{Segment.FlightSegment[0].DepartureDateTime.replace('T', ' ') | date : 'medium'}}</small>
                                                        </div>

                                                    </div>
                                                    <div class="col-sm-2 px-2 text-center">
                                                        <img alt="" class="d-inline-block pt-1 pr-2" src="assets/img/icons/flight_to-ic.png">
                                                        <p class="text-primary">
                                                            {{Segment.FlightSegment[0].StopQuantity}} Stop</p>
                                                    </div>

                                                    <div class="col-sm-3 px-2  d-flex align-items-start">

                                                        <div class="d-inline-block">
                                                            <p>{{Segment.FlightSegment[(Segment.FlightSegment.length - 1)].ArrivalAirport.LocationCode | airPorts}}
                                                            </p>
                                                            <small>{{Segment.FlightSegment[(Segment.FlightSegment.length -
                                1)].ArrivalDateTime.replace('T', ' ') | date : 'medium'}}</small>
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>

                                        </div>
                                    </div>



                                    <div id="isValidating_{{i}}" style="display:none" class="center">
                                        <span id="isValidatingMsg_{{i}}">Checking Information</span>
                                        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                    </div>
                                    <div class="segment-footer pl-3 d-flex justify-content-between align-items-center">
                                        <div class="price font-weight-bold"></div>


                                        <div class="book-details d-flex">
                                            <a class="d-flex align-items-center" (click)="flightDetailsToggle($event)" data-toggle="collapse" href="#showFlightDetails-{{i}}" role="button">
                                                <span id="plus_{{i}}">
                                                    <i-plus-circle></i-plus-circle>&nbsp;View Details
                                                </span>
                                                <span id="minus_{{i}}" style="display:none">
                                                    <i-minus-circle></i-minus-circle>&nbsp;Hide Details
                                                </span>
                                            </a>
                                            <button class="flight-select-btn d-flex btn btn-primary rounded-0 border-0 px-5 py-2 ml-2" (click)="airByTag(Itinerary.TPA_Extensions.TagID, i)">Select
                                                <i-arrow-right class="feather"></i-arrow-right>
                                            </button>
                                            <b class="price font-weight-bold d-flex pl-3 pr-3 align-items-center">
                                                {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.CurrencyCode}}
                                                {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.Amount}}
                                                /-
                                            </b>
                                        </div>
                                    </div>

                                    <div class="flight-segment-details p-2 rounded-0 collapse" id="showFlightDetails-{{i}}">
                                        <div *ngFor="let Segment of Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption">

                                            <div class="bg-white" *ngFor="let eachSegment of Segment.FlightSegment">
                                                <div class="flight-segment-details-header py-1 px-2 d-flex align-items-center">
                                                    <img alt="Flight Sector Icon" class="mr-2" src="assets/img/icons/two-flighs-logo.png"> {{eachSegment.DepartureAirport.LocationCode | airPorts}} - {{eachSegment.ArrivalAirport.LocationCode | airPorts}}
                                                </div>
                                                <div class="row m-0 py-1" style="background:#ccc">
                                                    <div class="col-sm-2">Flight</div>
                                                    <div class="col-sm-3">Departure</div>
                                                    <div class="col-sm-2">Flight Duration</div>
                                                    <div class="col-sm-3">Arrival</div>
                                                    <div class="col-sm-2">Stop</div>
                                                </div>
                                                <div class="row m-0 py-2 d-flex align-items-center">
                                                    <div class="col-sm-2">
                                                        <div class="d-inline-block text-center">
                                                            <img class="img-fluid" src="https://www.rehmantravel.com/application/modules/RT-agent/AirlineLogos/{{eachSegment.OperatingAirline.Code}}.png" alt="EY Logo">
                                                            <p class="mb-0">{{eachSegment.OperatingAirline.Code}} {{eachSegment.FlightNumber}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-map-pin class="feather"></i-map-pin>
                                                            </div>
                                                            <div>
                                                                <p class="mb-0">
                                                                    {{eachSegment.DepartureAirport.LocationCode | airPorts}}
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-calendar class="feather"></i-calendar>
                                                            </div>
                                                            <div>
                                                                <small>{{eachSegment.DepartureDateTime.replace('T', ' ') | date : 'fullDate'}}</small>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-clock class="feather"></i-clock>
                                                            </div>
                                                            <div>
                                                                <small>{{eachSegment.DepartureDateTime.replace('T', ' ') | date : 'mediumTime'}}</small>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-map-pin class="feather"></i-map-pin>
                                                            </div>
                                                            <div>
                                                                <p class="mb-0">
                                                                    {{eachSegment.DepartureAirport.LocationCode | airPorts: '1'}}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <small class="text-muted d-flex align-items-center">
                                                            <i-clock class="feather"></i-clock>
                                                            &nbsp;{{eachSegment.ElapsedTime | secondsPipe}}
                                                        </small>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-map-pin class="feather"></i-map-pin>
                                                            </div>
                                                            <div>
                                                                <p class="mb-0">
                                                                    {{eachSegment.ArrivalAirport.LocationCode | airPorts}}
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-calendar class="feather"></i-calendar>
                                                            </div>
                                                            <div>
                                                                <small>{{eachSegment.ArrivalDateTime.replace('T', ' ') | date : 'fullDate'}}</small>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-clock class="feather"></i-clock>
                                                            </div>
                                                            <div>
                                                                <small>{{eachSegment.ArrivalDateTime.replace('T', ' ') | date : 'mediumTime'}}</small>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-contents-between">
                                                            <div>
                                                                <i-map-pin class="feather"></i-map-pin>
                                                            </div>
                                                            <div>
                                                                <p class="mb-0">
                                                                    {{eachSegment.ArrivalAirport.LocationCode | airPorts: '1'}}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <p class="text-primary">{{eachSegment.StopQuantity}} Stop</p>
                                                    </div>
                                                </div>
                                                <div *ngIf="eachSegment.StopQuantity > 0" class="stop_{{eachSegment.StopQuantity}}" style="display:none;">
                                                    &nbsp;</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="{{Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption[0].FlightSegment[0].OperatingAirline.Code}}" style="display:none;">&nbsp;</div>
                            </div>

                            <div *ngIf="moreFlights">
                                <div *ngFor="let mFlights of moreFlights">
                                    <div class="card shadow rounded-0 mb-3 p-0 d-none d-sm-block eachRow" *ngFor="let Itinerary of mFlights; let k=index;">
                                        <div class="card-body">
                                            <div>
                                                <div>
                                                    <div *ngFor="let Segment of Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption; let l=last" class="flight-segment">
                                                        <div class="row d-flex align-items-center">
                                                            <div class="col-sm-1 pr-2 text-left">
                                                                <div class="d-inline-block text-center">
                                                                    <img class="img-fluid" src="https://www.rehmantravel.com/application/modules/RT-agent/AirlineLogos/{{Segment.FlightSegment[0].OperatingAirline.Code}}.png" alt="{{Segment.FlightSegment[0].OperatingAirline.Code}} Logo">
                                                                    <p>{{Segment.FlightSegment[0].OperatingAirline.Code}} {{Segment.FlightSegment[0].OperatingAirline.FlightNumber}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 px-2">
                                                                <h5><span *ngFor="let flgtSegment of Segment.FlightSegment">{{flgtSegment.DepartureAirport.LocationCode}}
                                                                        -
                                                                    </span>{{Segment.FlightSegment[(Segment.FlightSegment.length - 1)].ArrivalAirport.LocationCode}}
                                                                </h5>
                                                                <small class="text-muted d-flex align-items-center">
                                                                    <i-clock class="feather"></i-clock>
                                                                    &nbsp;{{Segment.ElapsedTime | secondsPipe}}
                                                                </small>
                                                            </div>

                                                            <div class="col-sm-3 px-2 d-flex align-items-start">


                                                                <div class="d-inline-block">
                                                                    <p>{{Segment.FlightSegment[0].DepartureAirport.LocationCode | airPorts}}
                                                                    </p>
                                                                    <small>{{Segment.FlightSegment[0].DepartureDateTime.replace('T', ' ') | date :
                                    'medium'}}</small>
                                                                </div>

                                                            </div>
                                                            <div class="col-sm-2 px-2 text-center">
                                                                <img alt="" class="d-inline-block pt-1 pr-2" src="assets/img/icons/flight_to-ic.png">
                                                                <p class="text-primary">
                                                                    {{Segment.FlightSegment[0].StopQuantity}} Stop</p>
                                                            </div>

                                                            <div class="col-sm-3 px-2  d-flex align-items-start">

                                                                <div class="d-inline-block">
                                                                    <p>{{Segment.FlightSegment[(Segment.FlightSegment.length - 1)].ArrivalAirport.LocationCode | airPorts}}
                                                                    </p>
                                                                    <small>{{Segment.FlightSegment[(Segment.FlightSegment.length -
                                    1)].ArrivalDateTime.replace('T', ' ') | date : 'medium'}}</small>
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>

                                                </div>
                                            </div>


                                            <div id="isValidating_{{k + Offset}}" style="display:none" class="center">
                                                <span id="isValidatingMsg_{{k + Offset}}">Checking Information</span>
                                                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                            </div>
                                            <div class="segment-footer pl-3 d-flex justify-content-between align-items-center">
                                                <div class="price font-weight-bold"></div>


                                                <div class="book-details d-flex">
                                                    <a class="d-flex align-items-center" (click)="flightDetailsToggle($event)" data-toggle="collapse" href="#showFlightDetails-{{k + Offset}}" role="button">
                                                        <span id="plus_{{k + Offset}}">
                                                            <i-plus-circle></i-plus-circle>&nbsp;View Details
                                                        </span>
                                                        <span id="minus_{{k + Offset}}" style="display:none">
                                                            <i-minus-circle></i-minus-circle>&nbsp;Hide Details
                                                        </span>
                                                    </a>
                                                    <button class="flight-select-btn d-flex btn btn-primary rounded-0 border-0 px-5 py-2 ml-2" (click)="airByTag(Itinerary.TPA_Extensions.TagID, (k + Offset))">Select
                                                        <i-arrow-right class="feather"></i-arrow-right>
                                                    </button>
                                                    <b class="price font-weight-bold d-flex pl-3 pr-3 align-items-center">
                                                        {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.CurrencyCode}}
                                                        {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.Amount}}
                                                        /-
                                                    </b>
                                                </div>
                                            </div>

                                            <div class="flight-segment-details p-2 rounded-0 collapse" id="showFlightDetails-{{k + Offset}}">
                                                <div *ngFor="let Segment of Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption">

                                                    <div class="bg-white" *ngFor="let eachSegment of Segment.FlightSegment">
                                                        <div class="flight-segment-details-header py-1 px-2 d-flex align-items-center">
                                                            <img alt="Flight Sector Icon" class="mr-2" src="assets/img/icons/two-flighs-logo.png"> ISB,Islamabad,Pakistan - AUH,Abu Dhabi,United Arab Emirates
                                                        </div>
                                                        <div class="row m-0 py-1" style="background:#ccc">
                                                            <div class="col-sm-2">Flight</div>
                                                            <div class="col-sm-3">Departure</div>
                                                            <div class="col-sm-2">Flight Duration</div>
                                                            <div class="col-sm-3">Arrival</div>
                                                            <div class="col-sm-2">Stop</div>
                                                        </div>
                                                        <div class="row m-0 py-2 d-flex align-items-center">
                                                            <div class="col-sm-2">
                                                                <div class="d-inline-block text-center">
                                                                    <img class="img-fluid" src="https://www.rehmantravel.com/application/modules/RT-agent/AirlineLogos/{{eachSegment.OperatingAirline.Code}}.png" alt="EY Logo">
                                                                    <p class="mb-0">
                                                                        {{eachSegment.OperatingAirline.Code}} {{eachSegment.FlightNumber}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-map-pin class="feather"></i-map-pin>
                                                                    </div>
                                                                    <div>
                                                                        <p class="mb-0">
                                                                            {{eachSegment.DepartureAirport.LocationCode | airPorts}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-calendar class="feather"></i-calendar>
                                                                    </div>
                                                                    <div>
                                                                        <small>{{eachSegment.DepartureDateTime.replace('T', ' ') | date : 'fullDate'}}</small>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-clock class="feather"></i-clock>
                                                                    </div>
                                                                    <div>
                                                                        <small>{{eachSegment.DepartureDateTime.replace('T', ' ') | date : 'mediumTime'}}</small>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-map-pin class="feather"></i-map-pin>
                                                                    </div>
                                                                    <div>
                                                                        <p class="mb-0">
                                                                            {{eachSegment.DepartureAirport.LocationCode | airPorts: '1'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-2">
                                                                <small class="text-muted d-flex align-items-center">
                                                                    <i-clock class="feather"></i-clock>
                                                                    &nbsp;{{eachSegment.ElapsedTime | secondsPipe}}
                                                                </small>
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-map-pin class="feather"></i-map-pin>
                                                                    </div>
                                                                    <div>
                                                                        <p class="mb-0">
                                                                            {{eachSegment.ArrivalAirport.LocationCode | airPorts}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-calendar class="feather"></i-calendar>
                                                                    </div>
                                                                    <div>
                                                                        <small>{{eachSegment.ArrivalDateTime.replace('T', ' ') | date : 'fullDate'}}</small>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-clock class="feather"></i-clock>
                                                                    </div>
                                                                    <div>
                                                                        <small>{{eachSegment.ArrivalDateTime.replace('T', ' ') | date : 'mediumTime'}}</small>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex justify-contents-between">
                                                                    <div>
                                                                        <i-map-pin class="feather"></i-map-pin>
                                                                    </div>
                                                                    <div>
                                                                        <p class="mb-0">
                                                                            {{eachSegment.ArrivalAirport.LocationCode | airPorts: '1'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-2">
                                                                <p class="text-primary">{{eachSegment.StopQuantity}} Stop
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="eachSegment.StopQuantity > 0" class="stop_{{eachSegment.StopQuantity}}" style="display:none;">&nbsp;</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="{{Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption[0].FlightSegment[0].OperatingAirline.Code}}" style="display:none;">&nbsp;</div>
                                    </div>
                                </div>
                            </div>
                            <!-- desktop listing end -->
                            <!-- <div class="loadingMore center" style="display:none;">
                                <h4>Loading More Flights . . .</h4>
                            </div> -->

                            <!-- mobile listing start -->
                            <div class="d-block d-sm-none" *ngFor="let Itinerary of availableFlights; let i=index;">

                                <mat-card class="mobile-flight-segment-logo d-flex justify-content-center align-items-center bg-white py-1 px-2 pb-0 rounded-0 mat-card">
                                    <!---->
                                    <div class="d-inline-block">
                                        <!---->
                                        <div class="d-inline-block text-center">
                                            <!---->
                                            <div>
                                                <img class="img-fluid mx-1" src="http://rehmantravel.com/application/modules/RT-agent/AirlineLogos/{{Itinerary.TPA_Extensions.ValidatingCarrier.Code}}.png" alt="{{Itinerary.TPA_Extensions.ValidatingCarrier.Code}} Logo">
                                            </div>
                                            <!---->
                                        </div>
                                        <div class="d-inline-block text-center">
                                            <!---->
                                            <!---->
                                        </div>
                                    </div>
                                </mat-card>

                                <div class="mobile-flight-segment flight-segment p-0">
                                    <mat-card class="mb-2 p-0 pt-1 rounded-0 mat-card">

                                        <!---->
                                        <div class="d-flex row align-items-center pb-2 px-3" *ngFor="let Segment of Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption; let l=last">

                                            <div class="col-5">
                                                <h5>{{Segment.FlightSegment[0].DepartureAirport.LocationCode | airPorts: '2'}}
                                                </h5>
                                                <small class="d-block">{{Segment.FlightSegment[0].DepartureDateTime.replace('T', ' ') | date :
                          'medium'}}</small>
                                                <!-- <small class="d-block">7:05 AM</small> -->
                                            </div>
                                            <div class="text-center col-2 px-0">
                                                <div class="text-center">
                                                    <small class="text-muted d-flex align-items-center" style="font-size:10px;">
                                                        <i-clock class="feather"></i-clock>
                                                        {{Segment.ElapsedTime | secondsPipe}}
                                                    </small>
                                                </div>
                                                <div class="text-center">
                                                    <img alt="Flight Sector Icon" class="img-fluid" src="assets/img/icons/flight_to-ic.png">
                                                </div>
                                                <div class="text-center">
                                                    <p class="text-primary">{{Segment.FlightSegment[0].StopQuantity}} Stop
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="col-5">
                                                <h5>{{Segment.FlightSegment[(Segment.FlightSegment.length - 1)].ArrivalAirport.LocationCode | airPorts: '2'}}
                                                </h5>
                                                <small class="d-block">{{Segment.FlightSegment[(Segment.FlightSegment.length -
                          1)].DepartureDateTime.replace('T', ' ') | date : 'medium'}}</small>
                                                <!-- <small class="d-block">4:10 PM</small> -->

                                            </div>
                                        </div>
                                        <!---->

                                        <div id="isValidatingM_{{i}}" style="display:none" class="center">
                                            <span id="isValidatingMsgM_{{i}}">Checking Information</span>
                                            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                        </div>
                                        <div class="segment-footer pl-3 d-flex justify-content-between align-items-center">
                                            <div class="price font-weight-bold"></div>

                                            <!---->
                                            <div class="book-details d-flex">
                                                <a class="d-flex align-items-center" (click)="showFlightDetailsM(Itinerary.TPA_Extensions.TagID, i)" role="button">
                                                    <i-plus-circle></i-plus-circle>&nbsp;Details
                                                </a>
                                                <button class="flight-select-btn d-flex btn btn-primary rounded-0 border-0 p-2 px-4 ml-2" (click)="airByTag(Itinerary.TPA_Extensions.TagID, i, 'MS')">Select
                                                    <i-arrow-right class="feather"></i-arrow-right>
                                                </button>
                                                <!----><b class="price font-weight-bold d-flex align-items-center pl-3 pr-3">
                                                    {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.CurrencyCode}}
                                                    {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.Amount}}
                                                    /-
                                                </b>
                                            </div>
                                        </div>

                                    </mat-card>
                                </div>
                            </div>

                            <div *ngIf="moreFlights">
                                <div *ngFor="let mFlights of moreFlights">
                                    <div class="d-block d-sm-none" *ngFor="let Itinerary of mFlights; let j=index;">

                                        <mat-card class="mobile-flight-segment-logo d-flex justify-content-center align-items-center bg-white py-1 px-2 pb-0 rounded-0 mat-card">
                                            <!---->
                                            <div class="d-inline-block">
                                                <!---->
                                                <div class="d-inline-block text-center">
                                                    <!---->
                                                    <div>
                                                        <img class="img-fluid mx-1" src="http://rehmantravel.com/application/modules/RT-agent/AirlineLogos/{{Itinerary.TPA_Extensions.ValidatingCarrier.Code}}.png" alt="{{Itinerary.TPA_Extensions.ValidatingCarrier.Code}} Logo">
                                                    </div>
                                                    <!---->
                                                </div>
                                                <div class="d-inline-block text-center">
                                                    <!---->
                                                    <!---->
                                                </div>
                                            </div>
                                        </mat-card>

                                        <div class="mobile-flight-segment flight-segment p-0">
                                            <mat-card class="mb-2 p-0 pt-1 rounded-0 mat-card">

                                                <!---->
                                                <div class="d-flex row align-items-center pb-2 px-3" *ngFor="let Segment of Itinerary.AirItinerary.OriginDestinationOptions.OriginDestinationOption; let l=last">

                                                    <div class="col-5">
                                                        <h5>{{Segment.FlightSegment[0].DepartureAirport.LocationCode | airPorts: '2'}}
                                                        </h5>
                                                        <small class="d-block">{{Segment.FlightSegment[0].DepartureDateTime.replace('T', ' ') | date :
                              'medium'}}</small>
                                                        <!-- <small class="d-block">7:05 AM</small> -->
                                                    </div>
                                                    <div class="text-center col-2 px-0">
                                                        <div class="text-center">
                                                            <small class="text-muted d-flex align-items-center" style="font-size:10px;">
                                                                <i-clock class="feather"></i-clock>
                                                                {{Segment.ElapsedTime | secondsPipe}}
                                                            </small>
                                                        </div>
                                                        <div class="text-center">
                                                            <img alt="Flight Sector Icon" class="img-fluid" src="assets/img/icons/flight_to-ic.png">
                                                        </div>
                                                        <div class="text-center">
                                                            <p class="text-primary">
                                                                {{Segment.FlightSegment[0].StopQuantity}} Stop</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-5">
                                                        <h5>{{Segment.FlightSegment[(Segment.FlightSegment.length - 1)].ArrivalAirport.LocationCode | airPorts: '2'}}
                                                        </h5>
                                                        <small class="d-block">{{Segment.FlightSegment[(Segment.FlightSegment.length -
                              1)].DepartureDateTime.replace('T', ' ') | date : 'medium'}}</small>
                                                        <!-- <small class="d-block">4:10 PM</small> -->

                                                    </div>
                                                </div>
                                                <!---->

                                                <div id="isValidatingM_{{j + Offset}}" style="display:none" class="center">
                                                    <span id="isValidatingMsgM_{{j + Offset}}">Checking
                                                        Information</span>
                                                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                                </div>
                                                <div class="segment-footer pl-3 d-flex justify-content-between align-items-center">
                                                    <div class="price font-weight-bold"></div>

                                                    <!---->
                                                    <div class="book-details d-flex">
                                                        <a class="d-flex align-items-center" (click)="showFlightDetailsM(Itinerary.TPA_Extensions.TagID, (j + Offset))" role="button">
                                                            <i-plus-circle></i-plus-circle>&nbsp;Details
                                                        </a>
                                                        <button class="flight-select-btn d-flex btn btn-primary rounded-0 border-0 p-2 px-4 ml-2" (click)="airByTag(Itinerary.TPA_Extensions.TagID, (j + Offset), 'MS')">Select
                                                            <i-arrow-right class="feather"></i-arrow-right>
                                                        </button>
                                                        <!----><b class="price font-weight-bold d-flex align-items-center pl-3 pr-3">
                                                            {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.CurrencyCode}}
                                                            {{Itinerary.AirItineraryPricingInfo[0].ItinTotalFare.TotalFare.Amount}}
                                                            /-
                                                        </b>
                                                    </div>
                                                </div>

                                            </mat-card>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- mobile listing end -->

                        </div>

                        <div *ngIf="availableFlights == null">
                            <h4 class="center">No Flights Found</h4>
                        </div>

                        <div class="afterFilters" style="display:none;">
                            <h4 class="center">No Matching Results</h4>
                        </div>
                    </div>
                </div>

            </div>
        </section>
        <app-footer></app-footer>
    </mat-drawer-content>

</mat-drawer-container>